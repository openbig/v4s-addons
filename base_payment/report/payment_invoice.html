<div style="width: 550px;">
${setLang(getLang('user'))}
<div>${_('Invoice Number')}: <strong>${o.number and o.number or (o.origin and o.origin or '')}</strong></div>
{% with
    company_partner = get_partner(o.company_id.partner_id.id);
    partner = get_partner(o.partner_id.id);
%}
<div>${get_label(o, 'company_id')}: <strong>${(company_partner.name + (company_partner.title and ', ' + company_partner.title.shortcut or '')).upper()}</strong></div>
<div>${get_label(o, 'partner_id')}: <strong>${(partner.name + (partner.title and ', ' + partner.title.shortcut or '')).upper()}</strong></div>
{% end %}
<table style="width: 100%;">
<tbody>
    <tr class="sectiontableheader">
    <th style="width: 50px;">${get_label(o.invoice_line[0].product_id, 'default_code')}</th>
    <th>${get_label(o.invoice_line[0], 'product_id')}</th>
    <th style="text-align: right; width: 50px;">${get_label(o.invoice_line[0], 'quantity')}</th>
    <th style="text-align: center; width: 50px;">${get_label(o.invoice_line[0], 'uos_id')}</th>
    <th style="text-align: right; width: 50px;">${get_label(o.invoice_line[0], 'price_subtotal')}</th>
    </tr>
{% for line in o.invoice_line %}\
    {% with index=(o.invoice_line.index(line)+1) %}
        {% choose index % 2 %}\
            {% when 1 %}<tr class="sectiontableentry1">{% end %}\
            {% when 0 %}<tr class="sectiontableentry2">{% end %}\
                <td style="text-align: center;">${line.product_id.default_code}</td>
                <td>${line.product_id.name}</td>
                <td style="text-align: right;">${line.quantity}</td>
                <td style="text-align: center;">${get_name(line.uos_id)}</td>
                <td style="text-align: right;">${formatLang(line.price_subtotal)}${'&nbsp;' + o.currency_id.symbol}</td>
            </tr>{% end %}
        {% end %}
        {% end %}
    {% end % }
{% end %}
</tbody>
</table>
<hr style="clear: both;"/>
<div style="float: right; clear: right;">${get_label(o, 'amount_untaxed')}:&nbsp;${formatLang(o.amount_untaxed)}${'&nbsp;' + o.currency_id.symbol}</div>
<div style="float: right; clear: right;">${get_label(o, 'amount_tax')}:&nbsp;${formatLang(o.amount_tax)}${'&nbsp;' + o.currency_id.symbol}</div>
<div style="float: right; clear: right;"><strong>${get_label(o, 'amount_total')}:&nbsp;${formatLang(o.amount_total)}&nbsp;${get_name(o.currency_id)}</strong></div>
<hr style="clear: both;"/>
<div style="text-align: right; clear: both;">
{% if o.residual > 0.0 or o.state not in ['draft', 'paid', 'cancel'] %}
{% for pa in payment_agencies %}\
    {% if o.currency_id.id in pa.get('currency_ids') or not pa.get('currency_ids') %}
    <a href="index.php?option=com_jera&view=jera&layout=form&payment=${pa['id']}&active_id=${o.id}"><img src="${pa['button_url']}" alt="${pa['name']}"/></a>
    {% end %}
{% end %}
{% end %}
</div>
</div>
